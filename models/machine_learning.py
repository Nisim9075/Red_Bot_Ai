from sklearn.feature_extraction.text import CountVectorizer
from sklearn.naive_bayes import MultinomialNB
import numpy as np

class MachineLearningModel:
    def __init__(self):
        self.vectorizer = CountVectorizer()
        self.model = MultinomialNB()
        self.is_trained = False  # משתנה לבדיקת האם המודל אומן
        self.data = []  # רשימת השאלות
        self.labels = []  # רשימת התשובות

    def train(self, data, labels):
        """אימון המודל עם הנתונים הקיימים"""
        X = self.vectorizer.fit_transform(data)
        self.model.fit(X, labels)
        self.is_trained = True  # סימון שהמודל אומן
        self.data = data
        self.labels = labels

    def predict(self, text):
        """חיזוי תשובה למילה או שאלה"""
        if not self.is_trained:
            raise ValueError("❌ שגיאה: המודל לא אומן! יש לקרוא ל- train() לפני השימוש.")
        X = self.vectorizer.transform([text])
        return self.model.predict(X)[0]

    def add_new_data(self, new_data, new_label):
        """הוספת נתונים חדשים למודל"""
        self.data.append(new_data)  # הוספת השאלה
        self.labels.append(new_label)  # הוספת התשובה
        self.train(self.data, self.labels)  # לאמן את המודל עם הנתונים החדשים

    def add_bulk_data(self, new_data, new_labels):
        """הוספת כמות גדולה של נתונים בצורה יעילה"""
        self.data.extend(new_data)  # הוספת רשימת השאלות
        self.labels.extend(new_labels)  # הוספת רשימת התשובות
        self.train(self.data, self.labels)  # לאמן את המודל עם הנתונים החדשים


# יצירת מופע של המודל
ml_model = MachineLearningModel()

# אימון ראשוני משודרג למניעת שגיאות
sample_data = [
    "שלום", "מה שלומך?", "איך קוראים לך?", "ביי", "מה נשמע?", "מה חדש?", "איך אתה?", "מה אתה עושה?", 
    "אתה יכול לעזור לי?", "מה אתה יודע?"
]

sample_labels = [
    "היי!", "אני בסדר, תודה!", "אני צ'אטבוט!", "להתראות!", "הכל טוב, איך אתה?", "לא הרבה, מה איתך?", 
    "אני כאן כדי לעזור!", "אני לא עושה הרבה, רק עוזר לך!", "כמובן! איך אני יכול לעזור?", 
    "אני יודע הרבה דברים! תוכל לשאול אותי כל שאלה."
]

# אימון המודל
ml_model.train(sample_data, sample_labels)

# הוספת שאלה ותשובה חדשה למודל
ml_model.add_new_data("מה שלומך?", "אני מצוין, תודה ששאלת!")  # הוספת שאלה חדשה
ml_model.add_new_data("מה עשית היום?", "היום אני עוזר למשתמשים כמוך! איך היה היום שלך?")  # שאלה על פעילות המשתמש
ml_model.add_new_data("מה התוכניות שלך להיום?", "אני כאן כדי לעזור! איך אני יכול לעזור לך היום?")  # שאלה על תכניות
ml_model.add_new_data("מה אתה אוהב לעשות בזמנך הפנוי?", "אני אוהב לעזור לאנשים וללמוד כל הזמן. ומה איתך?")  # שאלה אישית על תחביבים
ml_model.add_new_data("איך היה היום שלך?", "היום היה יום מלא! איך אתה?")  # שאלה על היום של המשתמש
ml_model.add_new_data("יש משהו מעניין שקרה לך היום?", "אני תמיד שומע דברים מעניינים. ספר לי!")  # שאלה על משהו מעניין
ml_model.add_new_data("מהו המקום האהוב עליך?", "אני אוהב מקום שבו יש שקט ויכולת ללמוד. מה המקום האהוב עליך?")  # שאלה על מקומות אהובים
ml_model.add_new_data("מה אתה אוהב לאכול?", "אני לא אוכל, אבל זה תמיד מעניין לשמוע מה אנשים אוהבים לאכול!")  # שאלה על אוכל
ml_model.add_new_data("מהו הסרט האהוב עליך?", "סרטים הם עולם שלם! יש לך סרט אהוב שאתה ממליץ?")  # שאלה על סרטים
ml_model.add_new_data("איך אתה מרגיש היום?", "אני מרגיש נהדר! איך אתה מרגיש היום?")  # שאלה על הרגשות

# הוספת רשימת שאלות ותשובות בצורה יעילה
bulk_data = [
    "מה עושה אותך מאושר?", "מה זה בית בשבילך?", "יש לך חברים קרובים?", "מהו חלום שלך?", 
    "מה היית רוצה ללמוד?", "מהו הספר האהוב עליך?", "מהו הדבר הכי חשוב בעיניך?", "מה דעתך על מוזיקה?", 
    "מה עושה אותך שמח?", "מה דעתך על טכנולוגיה?"
]

bulk_labels = [
    "מאושר הוא מילה גדולה. מה עושה אותך מאושר?", "הבית הוא המקום שבו אתה מרגיש בבית. איך אתה רואה את הבית שלך?",
    "חברים קרובים חשובים בחיים. איך אתה רואה את הקשרים החברתיים שלך?", "חלום הוא משהו שמניע אותנו קדימה. איזה חלום יש לך?",
    "העולם מלא בדברים ללמוד. יש משהו שמעניין אותך ללמוד?", "ספרים יכולים לשנות חיים. יש ספר שמאוד השפיע עליך?",
    "הדברים החשובים משתנים אצל כל אדם. מה הדבר הכי חשוב לך בחיים?", "מוזיקה היא חלק מהחיים! יש לך סוג מוזיקה אהוב?",
    "הדברים הקטנים יכולים להיות המרגשים ביותר. מה עושה אותך שמח?", "טכנולוגיה היא העתיד! איך אתה רואה את השפעתה על חיינו?"
]

# הוספת כמות גדולה של נתונים למודל בצורה יעילה
ml_model.add_bulk_data(bulk_data, bulk_labels)

